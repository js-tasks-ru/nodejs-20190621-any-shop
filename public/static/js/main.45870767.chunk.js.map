{"version":3,"sources":["serviceWorker.js","store/modules/auth/constants.js","store/modules/auth/reducer.js","store/modules/categories/constants.js","store/modules/categories/reducer.js","store/modules/chat/constants.js","store/modules/chat/reducer.js","store/modules/orders/constants.js","store/modules/orders/reducer.js","store/modules/products/constants.js","store/modules/products/reducer.js","store/index.js","components/Modal/ModalBtnBack.js","components/Modal/ModalBtnClose.js","components/Modal/Modal.js","components/Chat/ChatMessage.js","components/Chat/ChatInner.js","network.js","store/modules/chat/actions.js","store/modules/auth/actions.js","components/Chat/Chat.js","components/ModalContextMenu.js","store/modules/helpers/useModal.js","components/ModalMenu/ModalAsItem.js","components/ModalMenu/ModalMenu.js","store/modules/categories/actions.js","components/Header.js","components/Footer.js","components/Application.js","components/Dropdown.js","components/ListGroupMenu.js","components/HomeCarousel.js","components/Card.js","components/Recommendations.js","components/Loader.js","store/modules/products/actions.js","components/Home.js","components/Form.js","components/Login.js","components/OAuthCallback.js","components/Register.js","components/Confirm.js","components/CategoriesSideBar.js","components/Category.js","components/Search.js","components/Product/ProductCarouselIndicators.js","components/Product/ProductCarousel.js","components/Product/Product.js","components/Checkout.js","store/modules/orders/actions.js","index.js"],"names":["Boolean","window","location","hostname","match","LoginRequest","Symbol","LoginFailure","LoginSuccess","RegisterRequest","RegisterFailure","RegisterSuccess","ConfirmRequest","ConfirmFailure","ConfirmSuccess","OAuthRequest","OAuthFailure","OAuthCallbackRequest","OAuthCallbackFailure","OAuthCallbackSuccess","FetchMeRequest","FetchMeSuccess","FetchMeFailure","initialState","token","localStorage","getItem","login","error","processing","registration","errors","complete","confirmation","oauth","oauthCallback","me","fetching","profile","FetchCategoriesRequest","FetchCategoriesSuccess","FetchCategoriesFailure","WebsocketConnected","WebsocketDisconnected","Message","FetchMessagesRequest","FetchMessagesSuccess","FetchMessagesFailure","isWebsocketConnected","messages","CheckoutRequest","CheckoutSuccess","CheckoutFailure","draft","FetchRecommendationsRequest","FetchRecommendationsSuccess","FetchRecommendationsFailure","FetchProductsByCategoryRequest","FetchProductsByCategorySuccess","FetchProductsByCategoryFailure","FetchProductsByQueryRequest","FetchProductsByQuerySuccess","FetchProductsByQueryFailure","FetchProductByIdRequest","FetchProductByIdSuccess","FetchProductByIdFailure","recommendations","byCategory","byQuery","byId","createStore","combineReducers","auth","state","arguments","length","undefined","action","type","Object","objectSpread","setItem","categories","chat","concat","message","orders","data","defineProperty","order","products","category","query","id","product","applyMiddleware","thunkMiddleware","ModalBtnBack","_ref","handleToggleModal","react_default","a","createElement","Button","color","className","onClick","aria-label","src","alt","Modal","title","content","isBackBtn","isCloseBtn","isOpen","rest","objectWithoutProperties","es_Modal","assign","toggle","ModalHeader","Modal_ModalBtnBack","ModalBtnClose","ChatMessage","income","outcome","date","from","cx","-income","-outcome","d","Date","getHours","getMinutes","formatDate","ChatInner","sendMessage","_useState","useState","_useState2","slicedToArray","msg","setMsg","map","Chat_ChatMessage","key","user","text","Form","onSubmit","e","preventDefault","Input","value","onChange","target","axios","create","validateStatus","status","removeItem","reload","fetchMessages","dispatch","getState","client","get","headers","Authorization","then","response","catch","fetchMe","socket","connect","bindActionCreators","props","isCollapsed","isFixed","setIsOpen","_sendMessage","emit","displayName","now","useEffect","io","on","fixed","Collapse","Chat_ChatInner","ModalContextMenu","item","react_router_dom","to","useModal","ModalAsItem","context","isChat","passedModalData","useContext","_useModal","Fragment","components_Modal_Modal","modalComponent","OpeningModalContext","React","createContext","ModalProvider","Provider","ModalMenu_ModalAsItem","ModalMenu","_ref2","ModalMenu_ModalProvider","Chat_Chat","components_ModalContextMenu","subcategories","subcategory","fetchCategories","mapDispatchToProps","withRouter","history","values","queryString","parse","search","isOpenMenu","setIsOpenMenu","_useState3","_useState4","setQuery","pathname","Navbar","light","expand","NavbarToggler","components_ModalMenu_ModalMenu","navbar","Nav","NavItem","event","push","inline","placeholder","outline","href","Footer","children","components_Header","role","components_Footer","ListGroupMenuDropdown","dropdownTitle","dropdownItems","setToggleState","Dropdown","DropdownToggle","caret","tag","DropdownMenu","DropdownItem","ListGroupMenu","ListGroup","ListGroupItem","components_Dropdown","items","altText","captionTitle","captionBtnText","captionBtnLink","captionBtnIconSrc","HomeCarousel","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","activeIndex","next","bind","assertThisInitialized","previous","goToIndex","onExiting","onExited","animating","nextIndex","setState","newIndex","_this2","slides","CarouselItem","Carousel","es_CarouselIndicators","onClickHandler","CarouselControl","direction","directionText","Component","CardComponent","url","cardTitle","cardImgSrc","cardPrice","cardRate","cardRateAmount","cardOldPrice","discount","Card","Link","CardImg","width","CardBody","CardTitle","CardText","formatter","Intl","NumberFormat","style","currency","Recommendations","CardDeck","components_Card","images","format","price","Loader","fetchProductById","fetchRecommendations","components_ListGroupMenu","components_HomeCarousel","components_Recommendations","changeState","setValue","name","fields","field","htmlFor","label","required","disabled","submitButton","loginAction","email","password","post","react_router","Form_Form","providerMap","vkontakte","fb","github","oauthCallbackAction","_ref5","provider","code","params","URLSearchParams","registerAction","validated","confirmAction","_ref3","verificationToken","CategoriesSideBar","selectedCategoryId","selectCategoryId","fetchProductsByCategory","selectedSubcategory","setSelectedSubcategory","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","done","find","err","return","fetchProductsByQuery","mapToCssModules","cssModule","split","c","join","CarouselIndicators","listClasses","indicators","idx","indicatorClasses","active","ProductCarousel","ProductCarouselIndicators","Product_ProductCarousel","description","checkout","replace","phone","setPhone","_useState5","_useState6","address","setAddress","keys","Alert","FormGroup","Label","for","size","ReactDOM","render","es","store","components_Application","exact","path","component","Home","Login","OAuthCallback","Register","Confirm","Category","Search","Product","Checkout","document","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.45870767.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const LoginRequest = Symbol('LoginRequest');\nexport const LoginFailure = Symbol('LoginFailure');\nexport const LoginSuccess = Symbol('LoginSuccess');\n\nexport const RegisterRequest = Symbol('RegisterRequest');\nexport const RegisterFailure = Symbol('RegisterFailure');\nexport const RegisterSuccess = Symbol('RegisterSuccess');\n\nexport const ConfirmRequest = Symbol('ConfirmRequest');\nexport const ConfirmFailure = Symbol('ConfirmFailure');\nexport const ConfirmSuccess = Symbol('ConfirmSuccess');\n\nexport const OAuthRequest = Symbol('OAuthRequest');\nexport const OAuthFailure = Symbol('OAuthFailure');\n\nexport const OAuthCallbackRequest = Symbol('OAuthCallbackRequest');\nexport const OAuthCallbackFailure = Symbol('OAuthCallbackFailure');\nexport const OAuthCallbackSuccess = Symbol('OAuthCallbackSuccess');\n\nexport const FetchMeRequest = Symbol('FetchMeRequest');\nexport const FetchMeSuccess = Symbol('FetchMeSuccess');\nexport const FetchMeFailure = Symbol('FetchMeFailure');\n","import {\n  LoginRequest, LoginSuccess, LoginFailure,\n  RegisterRequest, RegisterSuccess, RegisterFailure,\n  ConfirmRequest, ConfirmSuccess, ConfirmFailure,\n  OAuthRequest, OAuthFailure,\n  OAuthCallbackRequest, OAuthCallbackSuccess, OAuthCallbackFailure, FetchMeRequest, FetchMeSuccess,\n} from './constants';\n\nconst token = localStorage.getItem('token') || null;\n\nconst initialState = {\n  token,\n  login: {\n    error: null,\n    processing: false,\n  },\n  registration: {\n    errors: null,\n    processing: false,\n    complete: false,\n  },\n  confirmation: {\n    error: null,\n    processing: false,\n  },\n  oauth: {\n    error: null,\n    processing: false,\n  },\n  oauthCallback: {\n    error: null,\n    processing: false,\n  },\n  me: {\n    fetching: false,\n    profile: null,\n  }\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case LoginRequest:\n      return {\n        ...state,\n        login: {...initialState.login, processing: true}\n      };\n    case LoginSuccess:\n      localStorage.setItem('token', action.token);\n      return {\n        ...state,\n        login: initialState.login,\n        token: action.token\n      };\n    case LoginFailure:\n      return {\n        ...state,\n        login: {...initialState.login, error: action.error, processing: false}\n      };\n    case RegisterRequest:\n      return {\n        ...state,\n        registration: {...initialState.registration, processing: true}\n      };\n    case RegisterSuccess:\n      return {\n        ...state,\n        registration: {...initialState.registration, processing: false, complete: true,}\n      };\n    case RegisterFailure:\n      return {\n        ...state,\n        registration: {...initialState.registration, errors: action.errors, processing: false}\n      };\n    case ConfirmRequest:\n      return {\n        ...state,\n        confirmation: {...initialState.confirmation, processing: true}\n      };\n    case ConfirmSuccess:\n      localStorage.setItem('token', action.token);\n      return {...state, confirmation: initialState.confirmation, token: action.token};\n    case ConfirmFailure:\n      return {\n        ...state,\n        confirmation: {...initialState.confirmation, error: action.error, processing: false}\n      };\n    case OAuthRequest:\n      return {\n        ...state,\n        oauth: {...initialState.oauth, processing: true}\n      };\n    case OAuthFailure:\n      return {\n        ...state, oauth: {...initialState.oauth, error: action.error, processing: false}\n      };\n    case OAuthCallbackRequest:\n      return {\n        ...state,\n        oauthCallback: {...initialState.oauthCallback, processing: true}\n      };\n    case OAuthCallbackFailure:\n      return {\n        ...state,\n        oauthCallback: {...initialState.oauthCallback, error: action.error, processing: false}\n      };\n    case OAuthCallbackSuccess:\n      localStorage.setItem('token', action.token);\n      return {...state, oauthCallback: initialState.oauthCallback, token: action.token};\n    case FetchMeRequest:\n      return {...state, me: { ...initialState.me, fetching: true }};\n    case FetchMeSuccess:\n      return {...state, me: { ...initialState.me, profile: action.profile }};\n    default:\n      return state;\n  }\n}\n","export const FetchCategoriesRequest = Symbol('FetchCategoriesRequest');\nexport const FetchCategoriesSuccess = Symbol('FetchCategoriesSuccess');\nexport const FetchCategoriesFailure = Symbol('FetchCategoriesFailure');\n","import {\n  FetchCategoriesSuccess\n} from './constants';\n\nconst initialState = [];\n\nexport default function reducer(state = initialState, action) {\n  if (action.type === FetchCategoriesSuccess) {\n    return action.categories;\n  }\n  return state;\n}\n","export const WebsocketConnected = Symbol('WebsocketConnected');\nexport const WebsocketDisconnected = Symbol('WebsocketDisconnected');\nexport const Message = Symbol('Message');\n\nexport const FetchMessagesRequest = Symbol('FetchMessagesRequest');\nexport const FetchMessagesSuccess = Symbol('FetchMessagesSuccess');\nexport const FetchMessagesFailure = Symbol('FetchMessagesFailure');\n","import {\n  FetchMessagesSuccess,\n  WebsocketConnected, WebsocketDisconnected,\n  Message,\n} from './constants';\n\nconst initialState = {\n  isWebsocketConnected: false,\n  messages: [],\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case FetchMessagesSuccess:\n      return {\n        ...state,\n        messages: action.messages.concat(state.messages),\n      };\n    case WebsocketConnected:\n      return { ...state, isWebsocketConnected: true };\n    case WebsocketDisconnected:\n      return { ...state, isWebsocketConnected: false };\n    case Message:\n      return {\n        ...state,\n        messages: state.messages.concat(action.message),\n      };\n    default:\n      return state;\n  }\n}\n","export const CheckoutRequest = Symbol('CheckoutRequest');\nexport const CheckoutSuccess = Symbol('CheckoutSuccess');\nexport const CheckoutFailure = Symbol('CheckoutFailure');\n","import {CheckoutRequest, CheckoutSuccess, CheckoutFailure} from \"./constants\";\n\nconst initialState = {\n  draft: {\n    fetching: false,\n    errors: null,\n  },\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case CheckoutRequest:\n      return {\n        ...state,\n        draft: {\n          fetching: true,\n          error: null,\n          ...action.data,\n        }\n      };\n    case CheckoutSuccess:\n      return {\n        ...state,\n        draft: {\n          fetching: false,\n          error: null,\n        },\n        [action.order]: action.data,\n      };\n    case CheckoutFailure:\n      return {\n        ...state,\n        draft: {\n          ...state.draft,\n          fetching: false,\n          errors: action.errors,\n        }\n      };\n    default:\n      return state;\n  }\n}\n","export const FetchRecommendationsRequest = Symbol('FetchRecommendationsRequest');\nexport const FetchRecommendationsSuccess = Symbol('FetchRecommendationsSuccess');\nexport const FetchRecommendationsFailure = Symbol('FetchRecommendationsFailure');\n\nexport const FetchProductsByCategoryRequest = Symbol('FetchProductsByCategoryRequest');\nexport const FetchProductsByCategorySuccess = Symbol('FetchProductsByCategorySuccess');\nexport const FetchProductsByCategoryFailure = Symbol('FetchProductsByCategoryFailure');\n\nexport const FetchProductsByQueryRequest = Symbol('FetchProductsByQueryRequest');\nexport const FetchProductsByQuerySuccess = Symbol('FetchProductsByQuerySuccess');\nexport const FetchProductsByQueryFailure = Symbol('FetchProductsByQueryFailure');\n\nexport const FetchProductByIdRequest = Symbol('FetchProductByIdRequest');\nexport const FetchProductByIdSuccess = Symbol('FetchProductByIdSuccess');\nexport const FetchProductByIdFailure = Symbol('FetchProductByIdFailure');\n","import {\n  FetchRecommendationsSuccess,\n  FetchProductsByCategorySuccess,\n  FetchProductsByQueryRequest,\n  FetchProductsByQuerySuccess,\n  FetchProductByIdRequest,\n  FetchProductByIdSuccess,\n} from './constants';\n\nconst initialState = {\n  recommendations: [],\n  byCategory: {},\n  byQuery: {},\n  byId: {}\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case FetchRecommendationsSuccess:\n      return { ...state, recommendations: action.recommendations, };\n    case FetchProductsByCategorySuccess:\n      return {\n        ...state,\n        byCategory: {\n          ...state.byCategory,\n          [action.category]: action.products,\n        }\n      };\n    case FetchProductsByQueryRequest:\n      return {\n        ...state,\n        byQuery: {\n          ...state.byQuery,\n          [action.query]: {\n            fetching: true,\n            products: []\n          }\n        }\n      };\n    case FetchProductsByQuerySuccess:\n      return {\n        ...state,\n        byQuery: {\n          ...state.byQuery,\n          [action.query]: {\n            fetching: false,\n            products: action.products,\n          }\n        }\n      };\n    case FetchProductByIdRequest:\n      return {\n        ...state,\n        byId: {\n          ...state.byId,\n          [action.id]: {\n            fetching: true,\n            product: null\n          }\n        }\n      };\n    case FetchProductByIdSuccess:\n      return {\n        ...state,\n        byId: {\n          ...state.byId,\n          [action.id]: {\n            fetching: false,\n            product: action.product\n          }\n        }\n      };\n    default:\n      return state;\n  }\n}\n","import { createStore, applyMiddleware, combineReducers } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\n\nimport authReducer from './modules/auth/reducer';\nimport categoriesReducer from './modules/categories/reducer';\nimport chatReducer from './modules/chat/reducer';\nimport ordersReducer from './modules/orders/reducer';\nimport productsReducer from './modules/products/reducer';\n\nexport default createStore(\n  combineReducers({\n    auth: authReducer,\n    categories: categoriesReducer,\n    chat: chatReducer,\n    orders: ordersReducer,\n    products: productsReducer,\n  }),\n  applyMiddleware(thunkMiddleware)\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Button} from 'reactstrap';\n\nconst ModalBtnBack = ({handleToggleModal}) => (\n  <Button\n    color=\"link\"\n    className=\"arrow-back px-2 py-2\"\n    onClick={handleToggleModal}\n    aria-label=\"back\"\n  >\n    <img src=\"/assets/icons/icon-arrow.svg\" alt=\"back\"/>\n  </Button>\n);\n\nModalBtnBack.propTypes = {\n  handleToggleModal: PropTypes.func.isRequired\n};\n\nexport default ModalBtnBack;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Button} from 'reactstrap';\n\nconst ModalBtnBack = ({handleToggleModal}) => (\n  <Button\n    color=\"link\"\n    className=\"btn-close float-none px-2 py-2\"\n    onClick={handleToggleModal}\n    aria-label=\"close\"\n  >\n    <img src=\"/assets/icons/icon-close.svg\" alt=\"close\"/>\n  </Button>\n);\n\nModalBtnBack.propTypes = {\n  handleToggleModal: PropTypes.func.isRequired\n};\n\nexport default ModalBtnBack;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal as ReactstrapModal, ModalHeader} from 'reactstrap';\nimport ModalBtnBack from './ModalBtnBack';\nimport ModalBtnClose from './ModalBtnClose';\n\nconst Modal = ({title, content, isBackBtn, isCloseBtn, isOpen, handleToggleModal, ...rest}) => (\n  <ReactstrapModal\n    title={title}\n    isOpen={isOpen}\n    toggle={handleToggleModal}\n    content={content}\n    {...rest}\n  >\n    <ModalHeader>\n      {title}\n      {isBackBtn && (<ModalBtnBack handleToggleModal={handleToggleModal} />)}\n      {isCloseBtn && (<ModalBtnClose handleToggleModal={handleToggleModal} />)}\n    </ModalHeader>\n    {content}\n  </ReactstrapModal>\n);\n\nModal.propTypes = {\n  title: PropTypes.string,\n  isBackBtn: PropTypes.bool,\n  isCloseBtn: PropTypes.bool,\n  content: PropTypes.element.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  handleToggleModal: PropTypes.func.isRequired\n};\n\nexport default Modal;\n","import React from 'react';\n// import PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nconst ChatMessage = ({income, outcome, date, from, message}) => (\n  <div className={cx(\"chat__message\", {'-income': income, '-outcome': outcome})}>\n    <div className=\"chat__message--date\">{from} @ {formatDate(date)}</div>\n    <div className=\"chat__message--inner\">\n      {message}\n    </div>\n  </div>\n);\n\nfunction formatDate(date) {\n  const d = new Date(date);\n  return `${d.getHours()}:${d.getMinutes()}`;\n}\n\n\nChatMessage.propTypes = {\n  // message: PropTypes.string.isRequired\n};\n\nexport default ChatMessage;\n","import React, {useEffect, useState} from 'react';\nimport {Button, Form, Input} from 'reactstrap';\nimport ChatMessage from './ChatMessage';\n// import Loader from '../Loader';\n// import {fetchMessages} from \"../../store/modules/chat/actions\";\n// import {connect} from \"react-redux\";\n\nconst ChatInner = ({isWebsocketConnected, messages, sendMessage}) => {\n  // useEffect(() => {\n  //   fetchMessages();\n  // }, []);\n  //\n  // if (!messages.length) {\n  //   return <Loader />;\n  // }\n  \n  const [msg, setMsg] = useState('');\n  \n  function onSubmit(e) {\n    e.preventDefault();\n    if (isWebsocketConnected) {\n      sendMessage(msg);\n      setMsg('');\n    }\n  }\n\n  return (\n    <div className=\"chat__inner\">\n      <div className=\"chat__body\">\n        {messages.map(message => {\n          return (\n            <ChatMessage\n              key={message.id}\n              income\n              date={message.date}\n              from={message.user}\n              message={message.text} />\n          );\n        })}\n      </div>\n      <div className=\"chat__footer\">\n        <Form onSubmit={onSubmit} className=\"form-inline form-inline-flex\">\n          <Input value={msg} onChange={e => setMsg(e.target.value)} className=\"form-control mr-2\" type=\"text\" />\n          <Button type=\"submit\" color=\"link\" className=\"btn btn-send\">\n            <img src=\"/assets/icons/icon-send.svg\" alt=\"\" />\n          </Button>\n        </Form>\n      </div>\n    </div>\n  )\n};\n\n// function mapStateToProps(state) {\n//   return { messages: state.messages };\n// }\n//\n// const mapDispatchToProps = { fetchMessages };\n//\n// export default connect(mapStateToProps, mapDispatchToProps)(ChatInner);\n\nexport default ChatInner;\n","import axios from 'axios';\n\nexport default axios.create({\n  // baseURL: 'http://localhost:3001',\n  validateStatus: status => {\n    if (status === 401) {\n      localStorage.removeItem('token');\n      window.location.reload(true);\n      return;\n    }\n    return status <= 399;\n  }\n});\n","import client from '../../../network';\nimport {Message} from './constants';\n\nimport {\n  FetchMessagesRequest, FetchMessagesSuccess, FetchMessagesFailure,\n} from './constants';\n\nexport function fetchMessages() {\n  return (dispatch, getState) => {\n    dispatch({type: FetchMessagesRequest});\n    \n    const state = getState();\n    const token = state.auth.token;\n    \n    client.get('/api/messages', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      dispatch({type: FetchMessagesSuccess, messages: response.data.messages});\n    }).catch(error => {\n      dispatch({type: FetchMessagesFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function sendMessage(message) {\n  return { type: Message, message };\n}\n","import client from '../../../network';\n\nimport {\n  LoginRequest, LoginSuccess, LoginFailure,\n  RegisterRequest, RegisterSuccess, RegisterFailure,\n  ConfirmRequest, ConfirmSuccess, ConfirmFailure,\n  OAuthRequest, OAuthFailure,\n  OAuthCallbackRequest, OAuthCallbackSuccess, OAuthCallbackFailure,\n  FetchMeRequest, FetchMeSuccess, FetchMeFailure,\n} from './constants';\n\nexport function login({email, password}) {\n  return (dispatch, getState) => {\n    dispatch({type: LoginRequest});\n    \n    client.post('/api/login', {\n      email, password\n    }).then(response => {\n      dispatch({type: LoginSuccess, token: response.data.token});\n    }).catch(error => {\n      dispatch({type: LoginFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function register({email, displayName, password}) {\n  return (dispatch, getState) => {\n    dispatch({type: RegisterRequest});\n    \n    client.post('/api/register', {\n      email, displayName, password\n    }).then(response => {\n      dispatch({type: RegisterSuccess});\n    }).catch(error => {\n      dispatch({type: RegisterFailure, errors: error.response.data.errors});\n    });\n  }\n}\n\nexport function confirm({verificationToken}) {\n  return (dispatch, getState) => {\n    dispatch({type: ConfirmRequest});\n    \n    client.post('/api/confirm', {\n      verificationToken\n    }).then(response => {\n      dispatch({type: ConfirmSuccess, token: response.data.token});\n    }).catch(error => {\n      dispatch({type: ConfirmFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function oauth({provider}) {\n  return (dispatch, getState) => {\n    dispatch({type: OAuthRequest});\n    \n    client.get(`/api/oauth/${provider}`)\n      .then(response => {\n        window.location.href = response.data.location;\n      })\n      .catch(error => {\n        dispatch({type: OAuthFailure, error: error.response.data.error});\n      });\n  }\n}\n\nexport function oauthCallback({provider, code}) {\n  return (dispatch, getState) => {\n    dispatch({type: OAuthCallbackRequest});\n    \n    client.post('/api/oauth_callback', {\n      provider\n    }, {\n      params: { code }\n    }).then(response => {\n      dispatch({type: OAuthCallbackSuccess, token: response.data.token});\n    }).catch(error => {\n      dispatch({type: OAuthCallbackFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function fetchMe() {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (state.auth.me.fetching || !!state.auth.me.profile) return;\n    \n    dispatch({type: FetchMeRequest});\n    \n    const token = state.auth.token;\n    \n    client.get('/api/me', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      dispatch({type: FetchMeSuccess, profile: response.data});\n    }).catch(error => {\n      dispatch({type: FetchMeFailure, error: error.response.data.error});\n    });\n  }\n}\n","import React, {useState, useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {Collapse} from 'reactstrap';\nimport cx from 'classnames';\nimport ChatInner from './ChatInner';\nimport io from 'socket.io-client';\nimport {bindActionCreators} from 'redux';\nimport {WebsocketConnected, WebsocketDisconnected, Message} from '../../store/modules/chat/constants';\nimport {fetchMessages, sendMessage} from '../../store/modules/chat/actions';\nimport {fetchMe} from '../../store/modules/auth/actions';\n\nlet socket = null;\n\nfunction Chat(props) {\n  const {\n    token, isWebsocketConnected, messages, me, isCollapsed, isFixed,\n    dispatch, fetchMessages, sendMessage, fetchMe,\n  } = props;\n  const [isOpen, setIsOpen] = useState(false);\n\n  useEffect(() => {\n    fetchMe();\n    fetchMessages();\n    \n    socket = io(`http://localhost:3001?token=${token}`);\n    \n    socket.on('connect', () => {\n      dispatch({type: WebsocketConnected});\n    });\n    \n    socket.on('disconnect', () => {\n      dispatch({type: WebsocketDisconnected});\n    });\n    \n    socket.on('message', message => {\n      dispatch({type: Message, message});\n    });\n  }, []);\n\n  function handleToggleCollapse() {\n    setIsOpen(!isOpen);\n  }\n  \n  function _sendMessage(msg) {\n    socket.emit('message', msg);\n    sendMessage({\n      text: msg,\n      user: me.profile.displayName,\n      date: Date.now(),\n      id: Date.now(),\n    });\n  }\n  \n  if (me.fetching || !me.profile) return null;\n\n  return (\n    <div className={cx(\"chat\", {\"fixed\": isFixed})}>\n      {isCollapsed && (\n        <div className=\"chat__header\" onClick={handleToggleCollapse}>\n          Есть вопрос?\n          <img src=\"/assets/icons/icon-chat-white.svg\" alt=\"icon-chat\" />\n        </div>\n      )}\n      {isCollapsed\n        ? <Collapse isOpen={isOpen}>\n          <ChatInner\n            isWebsocketConnected={isWebsocketConnected}\n            sendMessage={_sendMessage}\n            messages={messages} />\n        </Collapse>\n        : <ChatInner\n          isWebsocketConnected={isWebsocketConnected}\n          sendMessage={_sendMessage}\n          messages={messages} />\n      }\n    </div>\n  );\n}\n\nChat.propTypes = {\n  isCollapsed: PropTypes.bool,\n  isFixed: PropTypes.bool\n};\n\nfunction mapStateToProps(state) {\n  return {\n    token: state.auth.token,\n    me: state.auth.me,\n    isWebsocketConnected: state.chat.isWebsocketConnected,\n    messages: state.chat.messages,\n  };\n}\n\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    dispatch,\n    ...bindActionCreators({fetchMessages, sendMessage, fetchMe}, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);\n","import React from \"react\";\nimport {Link} from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nconst ModalContextMenu = ({data}) => (\n  <div className=\"modal-menu\">\n    {data && data.map((item, key) => (\n      <Link to={item.src} key={key} className=\"modal-menu__item\">{item.title}</Link>\n    ))}\n  </div>\n);\n\nModalContextMenu.propTypes = {\n  data: PropTypes.array.isRequired\n};\n\nexport default ModalContextMenu;","import { useState } from 'react';\n\nconst useModal = () => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  function handleToggleModal() {\n    setIsOpen(!isOpen);\n  }\n\n  return {\n    isOpen,\n    handleToggleModal,\n  }\n};\n\nexport default useModal;","import React, {useContext} from \"react\";\nimport PropTypes from 'prop-types';\nimport useModal from \"../../store/modules/helpers/useModal\";\nimport Modal from '../Modal/Modal';\nimport {Button} from 'reactstrap';\n\nconst ModalAsItem = ({context, isChat}) => {\n  const passedModalData = useContext(context);\n  const {isOpen, handleToggleModal} = useModal();\n  return (\n    <>\n      <Modal\n        title={passedModalData.title}\n        content={passedModalData.modalComponent}\n        isBackBtn\n        isCloseBtn\n        isOpen={isOpen}\n        handleToggleModal={handleToggleModal}\n      />\n      <Button color=\"link\" className=\"modal-menu__item is-submenu w-100\"\n              onClick={handleToggleModal}\n      >\n        {passedModalData.title} {isChat && <img src=\"assets/icons/icon-chat.svg\" alt=\"\"/>}\n      </Button>\n    </>\n  )\n};\n\nModalAsItem.propTypes = {\n  context: PropTypes.object.isRequired,\n  isChat: PropTypes.bool\n};\n\nexport default ModalAsItem;","import React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport Chat from '../Chat/Chat';\nimport ModalContextMenu from '../ModalContextMenu';\nimport ModalAsItem from \"./ModalAsItem\";\n\n// Create a Context\nconst OpeningModalContext = React.createContext();\n\n// Create modal provider\nconst ModalProvider = ({item}) => (\n  <OpeningModalContext.Provider value={item}>\n    <ModalAsItem context={OpeningModalContext} isChat={item.isChat} />\n  </OpeningModalContext.Provider>\n);\n\nconst ModalMenu = ({token, categories}) => (\n  <div className=\"modal-menu\">\n    <Link to=\"/login\" className=\"modal-menu__item\">Вход</Link>\n    <Link to=\"/register\" className=\"modal-menu__item\">Регистрация</Link>\n    {!!token &&\n      <ModalProvider item={{\n        title: \"Есть вопрос?\",\n        modalComponent: <Chat />,\n        isChat: true,\n      }} />\n    }\n    <h3 className=\"h6 mb-0 modal-menu__title\">Категории</h3>\n    {categories.map(category => {\n      const item = {\n        title: category.title,\n        modalComponent: <ModalContextMenu data={category.subcategories.map(subcategory => ({\n          title: subcategory.title,\n          src: `/category/${subcategory.id}`\n        }))} />,\n        isChat: false\n      };\n      \n      return (\n        <ModalProvider key={category.id} item={item} />\n      );\n    })}\n  </div>\n);\n\nexport default ModalMenu;\n","import {\n  FetchCategoriesRequest, FetchCategoriesSuccess, FetchCategoriesFailure\n} from './constants';\nimport client from '../../../network';\n\nexport function fetchCategories() {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (state.categories.length !== 0) return;\n    \n    dispatch({type: FetchCategoriesRequest});\n    \n    client.get('/api/categories')\n      .then(response => {\n        dispatch({type: FetchCategoriesSuccess, categories: response.data.categories});\n      }).catch(error => {\n        dispatch({type: FetchCategoriesFailure, error: error.response.data.error});\n      });\n  }\n}\n","import React, {useState, useEffect} from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport Modal from './Modal/Modal';\nimport ModalMenu from './ModalMenu/ModalMenu';\nimport { withRouter } from 'react-router';\nimport queryString from 'query-string';\nimport {fetchCategories} from '../store/modules/categories/actions';\nimport { Collapse,\n  Navbar,\n  NavbarToggler,\n  Nav,\n  NavItem,\n  Form,\n  Input,\n  Button } from 'reactstrap';\nimport useModal from '../store/modules/helpers/useModal';\n\nfunction Header({token, categories, fetchCategories, history, location}) {\n  const values = queryString.parse(location.search);\n  const {isOpen, handleToggleModal} = useModal();\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\n  const [query, setQuery] = useState(values.query || '');\n  \n  useEffect(() => {\n    if (query !== values.query)\n      setQuery(values.query || '');\n  }, [location.search]);\n  \n  useEffect(() => {\n    if (isOpen) handleToggleModal();\n  }, [location.pathname]);\n  \n  useEffect(() => {\n    fetchCategories();\n  }, []);\n\n  function handleToggleHeaderMenu() {\n    setIsOpenMenu(!isOpenMenu);\n  }\n  \n  function search(event) {\n    event.preventDefault();\n    history.push(`/search?query=${query}`);\n  }\n  \n  function logout(e) {\n    e.preventDefault();\n    localStorage.removeItem('token');\n    window.location.href = \"/\";\n  }\n\n  return (\n    <header>\n      <Navbar light expand=\"lg\">\n        <div className=\"container\">\n          <div>\n            <NavbarToggler onClick={handleToggleHeaderMenu} className=\"d-none d-md-inline-flex d-lg-none\">\n              <img src=\"/assets/icons/icon-menu.svg\" alt=\"menu icon\"/>\n            </NavbarToggler>\n            <Modal\n              title=\"Меню\"\n              content={<ModalMenu token={token} categories={categories} />}\n              id=\"xsMenuModal\"\n              isCloseBtn\n              isOpen={isOpen}\n              handleToggleModal={handleToggleModal}\n            />\n            <NavbarToggler onClick={handleToggleModal} className=\"d-inline-flex d-md-none has-messages\">\n              <img src=\"/assets/icons/icon-menu.svg\" alt=\"menu icon\"/>\n            </NavbarToggler>\n            <Link to=\"/\" className=\"navbar-brand\"><strong>AnyShop</strong></Link>\n          </div>\n          <Link to=\"/\" className=\"mobile-search-menu-icon\">\n            <img src=\"/assets/icons/icon-search.svg\" alt=\"menu icon\"/>\n          </Link>\n\n          <Collapse isOpen={isOpenMenu} navbar>\n            <Nav className=\"mr-auto\" navbar>\n              <NavItem>\n                <Form onSubmit={search} inline className=\"my-2 my-md-0 ml-lg-5\">\n                  <Input\n                    className=\"form-control mr-sm-2\"\n                    type=\"text\"\n                    placeholder=\"Поиск\"\n                    aria-label=\"Search\"\n                    value={query}\n                    onChange={event => setQuery(event.target.value)}\n                  />\n                  <Button type=\"submit\" color=\"primary\" outline>Поиск</Button>\n                </Form>\n              </NavItem>\n            </Nav>\n            {!token &&\n            <div>\n              <Link to=\"/login\" className=\"text-muted\">Вход</Link>\n              {' | '}\n              <Link to=\"/register\" className=\"text-muted\">Регистрация</Link>\n            </div>\n            }\n            {!!token &&\n              <a onClick={logout} href=\"#\" className=\"text-muted\">Выйти</a>\n            }\n          </Collapse>\n        </div>\n      </Navbar>\n    </header>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    token: state.auth.token,\n    categories: state.categories,\n  };\n}\n\nconst mapDispatchToProps = { fetchCategories };\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\n","import React from 'react';\nimport {Link} from 'react-router-dom';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <div className=\"container\">\n        <div className=\"footer-inner\">\n          <div className=\"footer-menu\">\n            <Link to=\"#\" className=\"text-muted\">Правила использования</Link>\n            <span className=\"d-none d-md-inline-flex footer-menu-separator\">|</span>\n            <Link to=\"#\" className=\"text-muted\">Конфиденциальность</Link>\n            <span className=\"d-none d-md-inline-flex footer-menu-separator\">|</span>\n            <Link to=\"#\" className=\"text-muted\">Cookies</Link>\n            <span className=\"d-none d-md-inline-flex footer-menu-separator\">|</span>\n            <Link to=\"#\" className=\"text-muted\">Гарантия</Link>\n          </div>\n          <div>\n            © 1998-2019, AnyShop.com, Inc.\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport {connect} from 'react-redux';\n\nimport Header from './Header';\nimport Footer from './Footer';\nimport Chat from './Chat/Chat';\n\nfunction Application({token, children}) {\n  return (\n    <React.Fragment>\n      <Header />\n      <main role=\"main\">\n        {!!token && (\n          <div className=\"d-none d-lg-block\">\n            <Chat isFixed isCollapsed />\n          </div>\n        )}\n        {children}\n      </main>\n      <Footer />\n    </React.Fragment>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return { token: state.auth.token };\n}\n\nexport default connect(mapStateToProps)(Application);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport {Link} from 'react-router-dom';\n\nconst ListGroupMenuDropdown = ({dropdownTitle, dropdownItems}) => {\n    const [isOpen, setToggleState] = useState(false);\n\n    const handleToggleDropdown = () => {\n        setToggleState(!isOpen);\n    };\n\n    return (\n        <Dropdown isOpen={isOpen} toggle={handleToggleDropdown}>\n            <DropdownToggle caret tag=\"a\" className=\"nav-link\">\n                { dropdownTitle }\n            </DropdownToggle>\n            <DropdownMenu>\n                { dropdownItems.map((item, key) => (\n                  <DropdownItem key={key}>\n                    <Link key={item.id} to={`/category/${item.id}`}>\n                      {item.title}\n                    </Link>\n                  </DropdownItem>\n                )) }\n            </DropdownMenu>\n        </Dropdown>\n    )\n};\n\nListGroupMenuDropdown.propTypes = {\n    dropdownTitle: PropTypes.string,\n    dropdownItems: PropTypes.array\n};\n\nexport default ListGroupMenuDropdown;\n","import React from 'react';\nimport { ListGroup, ListGroupItem } from 'reactstrap';\nimport ListGroupMenuDropdown from './Dropdown';\n\nconst ListGroupMenu = ({ categories }) => {\n    return (\n        <div className=\"d-none d-md-block\">\n            <div className=\"backdrop\"></div>\n            <ListGroup className=\"sidebar\">\n                {categories.map(category => {\n                    return (\n                      <ListGroupItem key={category.id}>\n                          <ListGroupMenuDropdown dropdownTitle={category.title} dropdownItems={category.subcategories} />\n                      </ListGroupItem>\n                    );\n                })}\n            </ListGroup>\n        </div>\n    )\n};\n\nexport default ListGroupMenu;\n","import React, { Component } from 'react';\n\nimport {\n    Carousel,\n    CarouselItem,\n    CarouselControl,\n    CarouselIndicators\n} from 'reactstrap';\n\nconst items = [\n    {\n        id: '0',\n        src: '/assets/images/default-slide-img.jpg',\n        altText: 'Slide 1',\n        captionTitle: 'BEST LAPTOP DEALS',\n        captionBtnText: 'View all DEALS',\n        captionBtnLink: '#',\n        captionBtnIconSrc: '/assets/icons/icon-angle-white.svg'\n    },\n    {\n        id: '1',\n        src: '/assets/images/default-slide-img.jpg',\n        altText: 'Slide 2',\n        captionTitle: 'BEST LAPTOP DEALS',\n        captionBtnText: 'View all DEALS',\n        captionBtnLink: '#',\n        captionBtnIconSrc: '/assets/icons/icon-angle-white.svg'\n    },\n    {\n        id: '2',\n        src: '/assets/images/default-slide-img.jpg',\n        altText: 'Slide 3',\n        captionTitle: 'BEST LAPTOP DEALS',\n        captionBtnText: 'View all DEALS',\n        captionBtnLink: '#',\n        captionBtnIconSrc: '/assets/icons/icon-angle-white.svg'\n    }\n];\n\nclass HomeCarousel extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { activeIndex: 0 };\n        this.next = this.next.bind(this);\n        this.previous = this.previous.bind(this);\n        this.goToIndex = this.goToIndex.bind(this);\n        this.onExiting = this.onExiting.bind(this);\n        this.onExited = this.onExited.bind(this);\n    }\n\n    onExiting() {\n        this.animating = true;\n    }\n\n    onExited() {\n        this.animating = false;\n    }\n\n    next() {\n        if (this.animating) return;\n        const nextIndex = this.state.activeIndex === items.length - 1 ? 0 : this.state.activeIndex + 1;\n        this.setState({ activeIndex: nextIndex });\n    }\n\n    previous() {\n        if (this.animating) return;\n        const nextIndex = this.state.activeIndex === 0 ? items.length - 1 : this.state.activeIndex - 1;\n        this.setState({ activeIndex: nextIndex });\n    }\n\n    goToIndex(newIndex) {\n        if (this.animating) return;\n        this.setState({ activeIndex: newIndex });\n    }\n\n    render() {\n        const { activeIndex } = this.state;\n\n        const slides = items.map((item) => {\n            return (\n                <CarouselItem\n                    onExiting={this.onExiting}\n                    onExited={this.onExited}\n                    key={item.id}\n                >\n                    <img src={item.src} alt={item.altText} className=\"third-slide\" />\n                    <div className=\"container\">\n                        <div className=\"carousel-caption\">\n                            <h3 className=\"h1\">{ item.captionTitle }</h3>\n                            <div>\n                                <a className=\"btn\" href={ item.captionBtnLink } role=\"button\">\n                                    { item.captionBtnText }\n                                    <img src={ item.captionBtnIconSrc } className=\"ml-3\" alt=\"\" />\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </CarouselItem>\n            );\n        });\n\n        return (\n            <Carousel\n                activeIndex={activeIndex}\n                next={this.next}\n                previous={this.previous}\n                className=\"main-carousel\"\n            >\n                <CarouselIndicators items={items} activeIndex={activeIndex} onClickHandler={this.goToIndex} />\n                {slides}\n                <CarouselControl direction=\"prev\" directionText=\"Previous\" onClickHandler={this.previous} />\n                <CarouselControl direction=\"next\" directionText=\"Next\" onClickHandler={this.next} />\n            </Carousel>\n        );\n    }\n}\n\nexport default HomeCarousel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'react-router-dom';\nimport {Card, CardTitle, CardText, CardImg, CardBody} from 'reactstrap';\nimport cx from 'classnames';\n\nconst CardComponent = ({url, cardTitle, cardImgSrc, cardRate, cardRateAmount, cardPrice, cardOldPrice, discount}) => (\n  <Card tag={Link} to={url}>\n    <div className=\"card-img-wrap\">\n      <CardImg width=\"100%\" className=\"card-img-top\" src={cardImgSrc} alt=\"Card image cap\"/>\n    </div>\n    <CardBody>\n      <CardTitle>{cardTitle}</CardTitle>\n      <div className=\"flex-grow\"></div>\n      <CardText className={cx(\"price-text\")}>\n        {cardPrice}\n      </CardText>\n    </CardBody>\n  </Card>\n);\n\nCardComponent.propTypes = {\n  cardTitle: PropTypes.string,\n  cardImgSrc: PropTypes.string,\n  cardRate: PropTypes.bool,\n  cardRateAmount: PropTypes.string,\n  cardPrice: PropTypes.string,\n  cardOldPrice: PropTypes.string,\n  discount: PropTypes.bool\n};\n\nexport default CardComponent;\n","import React from 'react';\nimport { CardDeck } from 'reactstrap';\n\nimport CardExample from './Card';\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nfunction Recommendations({ items }) {\n  return (\n    <React.Fragment>\n      <h3 className=\"section-title\">Лучшие рекоммендации для вас</h3>\n      <CardDeck className=\"homepage-cards\">\n        {items.map(item => {\n          return (\n            <CardExample\n              key={item.id}\n              url={`/product/${item.id}`}\n              cardTitle={item.title}\n              cardImgSrc={item.images[0]}\n              cardRate={true}\n              cardRateAmount=\"121\"\n              cardPrice={formatter.format(item.price)}\n              cardOldPrice=\"250\"\n              discount={true}\n            />\n          );\n        })}\n      </CardDeck>\n    </React.Fragment>\n  );\n}\n\nexport default Recommendations;\n","import React from 'react';\n\nexport default function Loader() {\n  return (\n    <div className=\"container\">\n      <h2>Loading...</h2>\n    </div>\n  );\n}\n","import {\n  FetchRecommendationsRequest, FetchRecommendationsSuccess, FetchRecommendationsFailure,\n  FetchProductsByCategoryRequest, FetchProductsByCategorySuccess, FetchProductsByCategoryFailure,\n  FetchProductsByQueryRequest, FetchProductsByQuerySuccess, FetchProductsByQueryFailure,\n  FetchProductByIdRequest, FetchProductByIdSuccess, FetchProductByIdFailure,\n} from './constants';\nimport client from '../../../network';\nimport get from 'lodash/get';\n\nexport function fetchRecommendations() {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    if (state.products.recommendations.length !== 0) return;\n    \n    dispatch({type: FetchRecommendationsRequest});\n    \n    client.get('/api/recommendations')\n      .then(response => {\n        dispatch({type: FetchRecommendationsSuccess, recommendations: response.data.recommendations});\n      }).catch(error => {\n      dispatch({type: FetchRecommendationsFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function fetchProductsByCategory(category) {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (state.products.byCategory[category]) return;\n    \n    dispatch({type: FetchProductsByCategoryRequest, category});\n    \n    client.get('/api/products', { params: { subcategory: category } })\n      .then(response => {\n        dispatch({type: FetchProductsByCategorySuccess, category, products: response.data.products});\n      }).catch(error => {\n      dispatch({type: FetchProductsByCategoryFailure, category, error: error.response.data.error});\n    });\n  }\n}\n\nexport function fetchProductsByQuery(query) {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (get(state, `products.byQuery[${query}].fetching`) === false) return;\n    \n    dispatch({type: FetchProductsByQueryRequest, query});\n    \n    client.get('/api/products', { params: { query } })\n      .then(response => {\n        dispatch({type: FetchProductsByQuerySuccess, query, products: response.data.products});\n      }).catch(error => {\n      dispatch({type: FetchProductsByQueryFailure, query, error: error.response.data.error});\n    });\n  }\n}\n\nexport function fetchProductById(id) {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (get(state, `products.byId[${id}].fetching`) === false) return;\n    \n    dispatch({type: FetchProductByIdRequest, id});\n    \n    client.get(`/api/products/${id}`)\n      .then(response => {\n        dispatch({type: FetchProductByIdSuccess, id, product: response.data.product});\n      }).catch(error => {\n      dispatch({type: FetchProductByIdFailure, id, error: error.response.data.error});\n    });\n  }\n}\n","import React, { useEffect } from 'react';\nimport {connect} from 'react-redux';\n\nimport ListGroupMenu from './ListGroupMenu';\nimport HomeCarousel from './HomeCarousel';\nimport Recommendations from './Recommendations';\nimport Loader from './Loader';\n\nimport {fetchCategories} from '../store/modules/categories/actions';\nimport {fetchRecommendations} from '../store/modules/products/actions';\n\nfunction Home({ categories, recommendations, fetchCategories, fetchRecommendations }) {\n  useEffect(() => {\n    fetchCategories();\n    fetchRecommendations();\n  }, []);\n  \n  if (!categories.length || !recommendations.length) {\n    return <Loader />;\n  }\n  \n  return (\n    <React.Fragment>\n      <div className=\"backdrop\"/>\n      <div className=\"container\">\n        <div className=\"row flex-column-reverse flex-lg-row\">\n          <div className=\"col-lg-3\">\n            <ListGroupMenu categories={categories} />\n          </div>\n          <div className=\"col-lg-9\">\n            <HomeCarousel/>\n          </div>\n        </div>\n      </div>\n      <div className=\"container\">\n        <div className=\"row justify-content-end\">\n          <div className=\"col-lg-9\">\n            <Recommendations items={recommendations} />\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    categories: state.categories,\n    recommendations: state.products.recommendations,\n  };\n}\n\nconst mapDispatchToProps = { fetchCategories, fetchRecommendations };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\n","import React, { useState } from 'react';\n\nexport default function Form(props) {\n  const [state, changeState] = useState({});\n  \n  function setValue(event) {\n    changeState({\n      ...state,\n      [event.target.name]: event.target.value\n    });\n  }\n  \n  return (\n    <div className=\"container pt-5\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <form onSubmit={(event) => props.onSubmit(event, state)}>\n            {!!props.error &&\n            <div className=\"alert alert-danger\" role=\"alert\">\n              {props.error}\n            </div>\n            }\n            <div className=\"jumbotron jumbotron-light jumbotron-form\">\n              \n              {props.fields.map(field => {\n                return (\n                  <div className=\"form-group\" key={field.id}>\n                    <label htmlFor={field.id}>{field.label}</label>\n                    <input type={field.type} className=\"form-control\" id={field.id}\n                           placeholder={field.placeholder}\n                           name={field.name}\n                           value={state[field.name] || \"\"} onChange={setValue} required />\n                  </div>\n                );\n              })}\n              \n              <button disabled={props.disabled} type=\"submit\" className=\"btn btn-primary btn-lg\">\n                {props.submitButton}\n              </button>\n              \n              <div className=\"form-footer mt-4\">\n                <props.Footer />\n              </div>\n            </div>\n          </form>\n          <div\n            className=\"h4 text-center font-weight-normal text-uppercase my-5 d-none d-lg-block\">или\n          </div>\n          <div className=\"socials mb-5\">\n            <a href=\"#\" className=\"btn btn-primary btn-social -fb\">\n              <img src=\"/assets/icons/icon-facebook.svg\" alt=\"\" />\n              Facebook\n            </a>\n            <a href=\"#\" className=\"btn btn-primary btn-social -vk\">\n              <img src=\"/assets/icons/icon-vk.svg\" alt=\"\" />\n              Vkontakte\n            </a>\n            <a href=\"#\" className=\"btn btn-primary btn-social -twitter\">\n              <img src=\"/assets/icons/icon-twitter.svg\" alt=\"\" />\n              Twitter\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect, Link } from 'react-router-dom';\nimport Form from './Form';\n\nimport { login } from '../store/modules/auth/actions';\n\nconst fields = [\n  {label: 'Email', type: 'email', id: 'email', name: 'email', placeholder: 'Email'},\n  {label: 'Пароль', type: 'password', id: 'password', name: 'password', placeholder: 'Пароль'},\n];\n\nfunction Login({token, login, loginAction}) {\n  if (token) return <Redirect to=\"/\" />;\n  \n  function onSubmit(event, fields) {\n    event.preventDefault();\n    if (login.processing) return;\n  \n    loginAction(fields);\n  }\n  \n  return (\n    <Form\n      disabled={login.processing}\n      title=\"Вход\"\n      error={login.error}\n      onSubmit={onSubmit}\n      fields={fields}\n      submitButton=\"Войти\"\n      Footer={() => (\n        <React.Fragment>\n          Нет аккаунта? <Link to=\"/register\">Регистрация</Link>\n        </React.Fragment>\n      )}\n    />\n  );\n}\n\nfunction mapStateToProps(state) {\n  return { login: state.auth.login, token: state.auth.token };\n}\n\nconst mapDispatchToProps = { loginAction: login };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect, Link } from 'react-router-dom';\nimport { oauthCallback } from '../store/modules/auth/actions';\n\nconst providerMap = {\n  vkontakte: 'VK',\n  fb: 'Facebook',\n  github: 'Github',\n};\n\nfunction OAuthCallback({token, oauthCallback, oauthCallbackAction, match, location}) {\n  if (token) return <Redirect to=\"/\" />;\n  \n  const params = new URLSearchParams(location.search);\n  const provider = match.params.provider;\n  \n  useEffect(() => {\n    if (params.get('error')) return;\n    oauthCallbackAction({code: params.get('code'), provider});\n  }, []);\n\n  return (\n    <main className=\"container\">\n      <div className=\"row login-form justify-content-center align-items-center\">\n        <div className=\"col col-md-6\">\n          <div className=\"text-center border border-light p-5\">\n            <p className=\"h4 mb-4\">Логин через {providerMap[provider]}</p>\n  \n            {oauthCallback.error || params.get('error')\n              ? <React.Fragment>\n                <p className=\"text-danger\">При выполнени операции произошла ошибка.</p>\n                <p className=\"text-danger\">{oauthCallback.error || \"\"}</p>\n                <Link to=\"/\">Вход</Link>\n              </React.Fragment>\n              : <React.Fragment>\n                <p>Пожалуйста, подождите.</p>\n                <div className=\"spinner-border\" role=\"status\">\n                  <span className=\"sr-only\">Загрузка...</span>\n                </div>\n              </React.Fragment>\n            }\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return { oauthCallback: state.oauthCallback, token: state.token };\n}\n\nconst mapDispatchToProps = { oauthCallbackAction: oauthCallback };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OAuthCallback);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport Form from './Form';\nimport { register } from '../store/modules/auth/actions';\n\nconst fields = [\n  {label: 'Email', type: 'email', id: 'email', name: 'email', placeholder: 'Email'},\n  {label: 'Имя', type: 'text', id: 'displayName', name: 'displayName', placeholder: 'Имя'},\n  {label: 'Пароль', type: 'password', id: 'password', name: 'password', placeholder: 'Пароль'},\n];\n\nfunction Register({registration, registerAction}) {\n  if (registration.complete) {\n    return (\n      <div className=\"container pt-5\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"text-center border border-light p-5\">\n            <p className=\"h4 mb-4\">Поздравляем, вы зарегистрированы!</p>\n            <p>На указанную вами почту отправлено письмо.</p>\n            <p>Для завершения регистрации, пожалуйста, перейдите по ссылке из этого письма.</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    );\n  }\n  \n  function onSubmit(event, fields) {\n    event.preventDefault();\n    if (registration.processing) return;\n  \n    registerAction(fields);\n  }\n  \n  return (\n    <Form\n      disabled={registration.processing}\n      title=\"Регистрация\"\n      validated={registration.errors}\n      errors={registration.errors}\n      onSubmit={onSubmit}\n      fields={fields}\n      submitButton=\"Создать аккаунт\"\n      Footer={() => (\n        <p>Уже есть аккаунт?&nbsp;\n          <Link to=\"/login\">Вход</Link>\n        </p>\n      )} />\n  );\n}\n\nfunction mapStateToProps(state) {\n  return { registration: state.auth.registration };\n}\n\nconst mapDispatchToProps = { registerAction: register };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Register);\n\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect, Link } from 'react-router-dom';\nimport { confirm } from '../store/modules/auth/actions';\n\nfunction Confirm({token, confirmation, confirmAction, match}) {\n  if (token) return <Redirect to=\"/\" />;\n  \n  useEffect(() => {\n    confirmAction({verificationToken: match.params.verificationToken});\n  }, []);\n\n  return (\n    <main className=\"container\">\n      <div className=\"row login-form justify-content-center align-items-center\">\n        <div className=\"col col-md-6\">\n          <div className=\"text-center border border-light p-5\">\n            <p className=\"h4 mb-4\">Подтверждение почтового адреса</p>\n  \n            {confirmation.error\n              ? <React.Fragment>\n                <p className=\"text-danger\">При выполнени операции произошла ошибка.</p>\n                <p className=\"text-danger\">{confirmation.error}</p>\n                <Link to=\"/\">Вход</Link>\n              </React.Fragment>\n              : <React.Fragment>\n                <p>Почтовый адрес подтверждается, пожалуйста, подождите.</p>\n                <div className=\"spinner-border\" role=\"status\">\n                  <span className=\"sr-only\">Загрузка...</span>\n                </div>\n              </React.Fragment>\n            }\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return { confirmation: state.confirmation, token: state.token };\n}\n\nconst mapDispatchToProps = { confirmAction: confirm };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Confirm);\n","import React, {useState} from 'react';\nimport {Link} from 'react-router-dom';\nimport {Collapse} from \"reactstrap\";\n\nexport default function CategoriesSideBar({category, categories}) {\n  const [selectedCategoryId, selectCategoryId] = useState(category);\n\n  return (\n    <div className=\"d-none d-lg-block col-lg-4 col-xl-3\">\n      <div id=\"accordion\" className=\"aside-accordion-menu list-group\">\n        {categories.map((category) => {\n          return (\n            <div className=\"list-group-item\" key={category.id}>\n              <h5 className=\"mb-0\" onClick={() => selectCategoryId(category.id)}>\n                {category.title} <img src=\"/assets/icons/icon-angle.svg\" alt=\"angle-right\" />\n              </h5>\n              <Collapse isOpen={selectedCategoryId === category.id}>\n                <ul>\n                  {category.subcategories.map(subcategory => {\n                    return (\n                      <li key={subcategory.id}>\n                        <Link to={`/category/${subcategory.id}`}>{subcategory.title}</Link>\n                      </li>\n                    );\n                  })}\n                </ul>\n              </Collapse>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport {fetchCategories} from '../store/modules/categories/actions';\nimport {fetchProductsByCategory} from '../store/modules/products/actions';\nimport Loader from './Loader';\nimport CategoriesSideBar from './CategoriesSideBar';\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nfunction Category({ categories, products, fetchCategories, fetchProductsByCategory, match }) {\n  useEffect(() => {\n    fetchCategories();\n    fetchProductsByCategory(match.params.category);\n  }, [match.params.category]);\n  \n  const [selectedCategoryId, selectCategoryId] = useState(null);\n  const [selectedSubcategory, setSelectedSubcategory] = useState({});\n  \n  useEffect(() => {\n    for (const category of categories) {\n      const subcategory = category.subcategories.find(({id}) => id === match.params.category);\n      if (!subcategory) continue;\n  \n      selectCategoryId(category.id);\n      setSelectedSubcategory(subcategory);\n      \n      break;\n    }\n  }, [categories.length]);\n\n  if (!categories.length || !products.length) {\n    return <Loader />;\n  }\n  \n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <CategoriesSideBar categories={categories} category={selectedCategoryId} />\n        <div className=\"col-lg-8 col-xl-9\">\n          <h3 className=\"h5 mt-4 mt-md-0 pt-1 mb-4\">{selectedSubcategory.title}</h3>\n          {products.map(product => {\n            return (\n              <div className=\"product-list-box\" key={product.id}>\n                <div className=\"box-inner-col description-col\">\n                  <Link to={`/product/${product.id}`} className=\"product-img\">\n                    <img src={product.images[0]} alt=\"img\" />\n                  </Link>\n                  <div className=\"product-desc\">\n                    <h4 className=\"col-title mb-2\">\n                      <Link to={`/product/${product.id}`}>{product.title}</Link>\n                    </h4>\n                    <p className=\"price-text mb-0 mt-2 d-inline-block d-md-none\">\n                      <strong>{formatter.format(product.price)}</strong>\n                    </p>\n                  </div>\n                </div>\n                <div className=\"box-inner-col price-col\">\n                  <h4 className=\"col-title price-text mb-2\">{formatter.format(product.price)}</h4>\n                  <div>\n                    <Link to={`/checkout/${product.id}`} className=\"btn btn-primary btn-lg\">Купить</Link>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    categories: state.categories,\n    products: state.products.byCategory[props.match.params.category] || []\n  };\n}\n\nconst mapDispatchToProps = { fetchCategories, fetchProductsByCategory };\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Category);\n","import React, {useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport {fetchCategories} from '../store/modules/categories/actions';\nimport {fetchProductsByQuery} from '../store/modules/products/actions';\nimport Loader from './Loader';\nimport CategoriesSideBar from './CategoriesSideBar';\nimport queryString from 'query-string';\nimport {Link} from \"react-router-dom\";\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nfunction Category({ categories, products, fetchCategories, fetchProductsByQuery, location }) {\n  const values = queryString.parse(location.search);\n  \n  useEffect(() => {\n    fetchCategories();\n    fetchProductsByQuery(values.query);\n  }, [values.query]);\n  \n  if (!categories.length || !products.products) {\n    return <Loader />;\n  }\n  \n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <CategoriesSideBar categories={categories} />\n        <div className=\"col-lg-8 col-xl-9\">\n          {products.products.length === 0 &&\n            <h4 className=\"col-title mb-2\">{`По запросу ${values.query} ничего найти не удалось`}</h4>\n          }\n          {products.products.map(product => {\n            return (\n              <div className=\"product-list-box\" key={product.id}>\n                <div className=\"box-inner-col description-col\">\n                  <Link to={`/product/${product.id}`} className=\"product-img\">\n                    <img src={product.images[0]} alt=\"img\" />\n                  </Link>\n                  <div className=\"product-desc\">\n                    <h4 className=\"col-title mb-2\"><Link to={`/product/${product.id}`}>{product.title}</Link></h4>\n                    <p className=\"price-text mb-0 mt-2 d-inline-block d-md-none\">\n                      <strong>{formatter.format(product.price)}</strong>\n                    </p>\n                  </div>\n                </div>\n                <div className=\"box-inner-col price-col\">\n                  <h4 className=\"col-title price-text mb-2\">\n                    {formatter.format(product.price)}\n                  </h4>\n                  <div>\n                    <Link to={`/checkout/${product.id}`} className=\"btn btn-primary btn-lg\">Купить</Link>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state, props) {\n  const values = queryString.parse(props.location.search);\n  return {\n    categories: state.categories,\n    products: state.products.byQuery[values.query] || {}\n  };\n}\n\nconst mapDispatchToProps = { fetchCategories, fetchProductsByQuery };\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Category);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nfunction mapToCssModules(className = '', cssModule) {\n  if (!cssModule) return className;\n  return className\n    .split(' ')\n    .map(c => cssModule[c] || c)\n    .join(' ');\n}\n\nconst CarouselIndicators = (props) => {\n  const { items, activeIndex, cssModule, onClickHandler, className } = props;\n\n  const listClasses = mapToCssModules(cx(className, 'carousel-indicators'), cssModule);\n  const indicators = items.map((item, idx) => {\n    const indicatorClasses = mapToCssModules(cx(\n      { active: activeIndex === idx }\n    ), cssModule);\n    return (\n      <li\n        key={`${item.key || Object.values(item).join('')}`}\n        onClick={(e) => {\n          e.preventDefault();\n          onClickHandler(idx);\n        }}\n        className={indicatorClasses}\n      >\n        <img src={item} alt={`indicator-img-${item.key}`} />\n      </li>);\n  });\n\n  return (\n    <ol className={listClasses}>\n      {indicators}\n    </ol>\n  );\n};\n\nCarouselIndicators.propTypes = {\n  items: PropTypes.array.isRequired,\n  activeIndex: PropTypes.number.isRequired,\n  cssModule: PropTypes.object,\n  onClickHandler: PropTypes.func.isRequired,\n  className: PropTypes.string,\n};\n\nexport default CarouselIndicators;","import React, { Component } from 'react';\n\nimport {\n  Carousel,\n  CarouselItem,\n  CarouselControl\n} from 'reactstrap';\nimport CarouselIndicators from './ProductCarouselIndicators';\n\nclass ProductCarousel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { activeIndex: 0 };\n    this.next = this.next.bind(this);\n    this.previous = this.previous.bind(this);\n    this.goToIndex = this.goToIndex.bind(this);\n    this.onExiting = this.onExiting.bind(this);\n    this.onExited = this.onExited.bind(this);\n  }\n\n  onExiting() {\n    this.animating = true;\n  }\n\n  onExited() {\n    this.animating = false;\n  }\n\n  next() {\n    if (this.animating) return;\n    const nextIndex = this.state.activeIndex === this.props.images.length - 1 ? 0 : this.state.activeIndex + 1;\n    this.setState({ activeIndex: nextIndex });\n  }\n\n  previous() {\n    if (this.animating) return;\n    const nextIndex = this.state.activeIndex === 0 ? this.props.images.length - 1 : this.state.activeIndex - 1;\n    this.setState({ activeIndex: nextIndex });\n  }\n\n  goToIndex(newIndex) {\n    if (this.animating) return;\n    this.setState({ activeIndex: newIndex });\n  }\n\n  render() {\n    const { activeIndex } = this.state;\n\n    const slides = this.props.images.map((item, key) => {\n      return (\n        <CarouselItem\n          onExiting={this.onExiting}\n          onExited={this.onExited}\n          key={key}\n        >\n          <div className=\"img-wrap\">\n            <img src={item} alt={item.altText} />\n          </div>\n        </CarouselItem>\n      );\n    });\n\n    return (\n      <Carousel\n        activeIndex={activeIndex}\n        next={this.next}\n        previous={this.previous}\n        className=\"product-carousel\"\n        images={this.props.images}\n      >\n        <CarouselIndicators items={this.props.images} activeIndex={activeIndex} onClickHandler={this.goToIndex} />\n        {slides}\n        <CarouselControl direction=\"prev\" directionText=\"Previous\" onClickHandler={this.previous} />\n        <CarouselControl direction=\"next\" directionText=\"Next\" onClickHandler={this.next} />\n      </Carousel>\n    );\n  }\n}\n\nexport default ProductCarousel;\n","import React, {useEffect} from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport {fetchProductById} from '../../store/modules/products/actions';\nimport Loader from '../Loader';\nimport ProductCarousel from './ProductCarousel';\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nfunction Product({ product, fetchProductById, match }) {\n  useEffect(() => {\n    fetchProductById(match.params.id);\n  }, [match.params.id]);\n\n  if (product.fetching || !product.product) {\n    return <Loader />;\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-lg-5\">\n          <ProductCarousel images={product.product.images} />\n        </div>\n        <div className=\"col-lg-7\">\n          <div className=\"product-info\">\n            <h3 className=\"h5\">{product.product.title}</h3>\n            <div className=\"row flex-column-reverse flex-lg-row\">\n              <div className=\"col-md-7\">\n                <p className=\"d-none d-lg-block\">\n                  {product.product.description}\n                </p>\n              </div>\n              <div className=\"col-md-5\">\n                <h4 className=\"col-title price-text mb-2 mt-0\">{formatter.format(product.product.price)}</h4>\n                <Link to={`/checkout/${product.product.id}`} className=\"btn btn-primary btn-lg\">Купить</Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    product: state.products.byId[props.match.params.id] || {}\n  };\n}\n\nconst mapDispatchToProps = { fetchProductById };\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Product);\n","import React, {useEffect, useState} from 'react';\nimport { Alert, Form, FormGroup, Input, Label, Button } from 'reactstrap';\nimport {fetchProductById} from '../store/modules/products/actions';\nimport {checkout} from '../store/modules/orders/actions';\nimport {fetchMe} from '../store/modules/auth/actions';\nimport {connect} from 'react-redux';\nimport Loader from './Loader';\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nfunction Checkout({ token, product, draft, me, fetchProductById, fetchMe, checkout, match, history }) {\n  useEffect(() => {\n    if (!token) return history.replace('/login');\n  }, []);\n  \n  useEffect(() => {\n    fetchMe();\n    fetchProductById(match.params.id);\n  }, [match.params.id]);\n  \n  const [state, setState] = useState('initial'); // 'pending'|'complete'\n  \n  const [phone, setPhone] = useState('+71111212123');\n  const [address, setAddress] = useState('Красная площадь, Москва, Россия');\n  \n  useEffect(() => {\n    if (draft.fetching === true) {\n      setState('pending');\n      return;\n    }\n    \n    if (!!draft.errors && state === 'pending') {\n      setState('initial');\n      return;\n    }\n    \n    if (!draft.errors && state === 'pending') {\n      setState('complete');\n    }\n  }, [draft]);\n  \n  function onSubmit(event) {\n    event.preventDefault();\n    checkout({\n      product: match.params.id,\n      phone, address,\n    });\n  }\n  \n  if (product.fetching || !product.product || me.fetching || !me.profile) {\n    return <Loader />;\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-lg-10\">\n          <Form onSubmit={onSubmit}>\n            <h3 className=\"h5 mb-4 mt-4 text-md-center\">Ваш заказ</h3>\n            {!!draft.errors && Object.keys(draft.errors).map(error => (\n              <Alert color=\"warning\" key={error}>{draft.errors[error]}</Alert>\n            ))}\n            {state === 'complete' &&\n              <Alert color=\"primary\">\n                Ваш заказ был оформлен. На ваш email отправлено подтверждение.\n              </Alert>\n            }\n            <div className=\"product-list-box\">\n              <div className=\"box-inner-col description-col\">\n                <div className=\"product-img\">\n                  <img src={product.product.images[0]} alt=\"img\" />\n                </div>\n                <div className=\"product-desc\">\n                  <h4 className=\"col-title mb-2\">{product.product.title}</h4>\n                  <p className=\"price-text mb-0 mt-2 d-inline-block d-md-none\">\n                    <strong>{formatter.format(product.product.price)}</strong>\n                  </p>\n                </div>\n              </div>\n              <div className=\"box-inner-col price-col justify-content-center\">\n                <p className=\"mb-0 font-weight-light\">Total:</p>\n                <h4 className=\"col-title price-text mb-2\">{formatter.format(product.product.price)}</h4>\n              </div>\n            </div>\n            <h3 className=\"h5 mb-4 mt-5 text-md-center\">Детали заказа</h3>\n            <div className=\"jumbotron jumbotron-light jumbotron-form mb-0\">\n              <div className=\"row\">\n                <div className=\"col-md-6\">\n                  <FormGroup>\n                    <Label for=\"exampleInput\">Имя:</Label>\n                    <Input disabled value={me.profile.displayName} type=\"text\" className=\"form-control\" id=\"exampleInput\" />\n                  </FormGroup>\n                  <FormGroup className=\"mb-4\">\n                    <Label for=\"exampleInput2\">Email:</Label>\n                    <input disabled value={me.profile.email} type=\"email\" className=\"form-control\" id=\"exampleInput2\" />\n                  </FormGroup>\n                </div>\n                <div className=\"col-md-6\">\n                  <FormGroup>\n                    <Label for=\"exampleInput3\">Телефон:</Label>\n                    <input value={phone} type=\"text\" className=\"form-control\" id=\"exampleInput3\"\n                           disabled={state === 'complete'}\n                           onChange={e => setPhone(e.target.value)}\n                           placeholder=\"+7 111 12 12 123\"/>\n                  </FormGroup>\n                  <FormGroup className=\"mb-4\">\n                    <Label for=\"exampleInput4\">Адрес:</Label>\n                    <Input value={address} type=\"text\" className=\"form-control\" id=\"exampleInput4\"\n                           onChange={e => setAddress(e.target.value)}\n                           disabled={state === 'complete'}\n                           placeholder=\"Красная площадь, Москва, Россия\"/>\n                  </FormGroup>\n                </div>\n              </div>\n            </div>\n            <div className=\"text-center mt-2 mb-5 my-sm-5\">\n              <Button disabled={state === 'complete'} type=\"submit\" color=\"primary\" size=\"lg\">\n                Подтвердить и оформить\n              </Button>\n            </div>\n          </Form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    product: state.products.byId[props.match.params.id] || {},\n    draft: state.orders.draft,\n    me: state.auth.me,\n    token: state.auth.token,\n  };\n}\n\nconst mapDispatchToProps = { fetchProductById, fetchMe, checkout };\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);\n","import {CheckoutFailure, CheckoutRequest, CheckoutSuccess} from './constants';\nimport client from '../../../network';\n\nexport function checkout(data) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const token = state.auth.token;\n  \n    dispatch({type: CheckoutRequest, data});\n    \n    client.post('/api/orders', data, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n    }).then(response => {\n      dispatch({type: CheckoutSuccess, data, order: response.data.order});\n    }).catch(error => {\n      dispatch({type: CheckoutFailure, data, errors: error.response.data.errors});\n    });\n  };\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter, Route } from 'react-router-dom';\n\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\nimport Application from './components/Application';\nimport Home from './components/Home';\nimport Login from './components/Login';\nimport OAuthCallback from './components/OAuthCallback';\nimport Register from './components/Register';\nimport Confirm from './components/Confirm';\nimport Category from './components/Category';\nimport Search from './components/Search';\nimport Product from './components/Product/Product';\nimport Checkout from './components/Checkout';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <Application>\n        <Route exact path=\"/\" component={Home} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/oauth/:provider\" component={OAuthCallback} />\n        <Route path=\"/register\" component={Register} />\n        <Route path=\"/confirm/:verificationToken\" component={Confirm} />\n        <Route path=\"/category/:category\" component={Category} />\n        <Route path=\"/search\" component={Search} />\n        <Route path=\"/product/:id\" component={Product} />\n        <Route path=\"/checkout/:id\" component={Checkout} />\n      </Application>\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}